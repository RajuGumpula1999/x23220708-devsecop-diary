{% extends 'main/base.html' %}

{% block title %}
    {{ title }}
{% endblock %}

{% block content %}
<!-- Modal for Delete Confirmation -->
<div class="modal" id="deleteConfirmationModal">
    <div class="modal-background"></div>
    <div class="modal-card">
        <header class="modal-card-head">
            <p class="modal-card-title">Confirm Delete</p>
            <button class="delete" aria-label="close" onclick="toggleModal(false)"></button>
        </header>
        <section class="modal-card-body">
            Are you sure you want to delete this note?
        </section>
        <footer class="modal-card-foot">
            <form method="post" action="{% url 'delete_article' 0 %}" id="deleteForm">
                {% csrf_token %}
                <input type="hidden" name="article_id" id="articleId" value="">
                <button type="submit" class="button is-danger">Delete</button>
                <button type="button" class="button" onclick="toggleModal(false)">Cancel</button>
            </form>
        </footer>
    </div>
</div>

<script>
    function toggleModal(isOpen) {
        const modal = document.getElementById('deleteConfirmationModal');
        if (isOpen) {
            modal.style.display = 'block';
        } else {
            modal.style.display = 'none';
        }
    }
    
    function openDeleteModal(articleId) {
        // Update the form action to include the correct article ID
        document.getElementById('articleId').value = articleId;
        document.getElementById('deleteForm').action = '/delete_article/' + articleId + '/';
        toggleModal(true);
    }
</script>

<section class="section">
    <div class="container">
        <h1 class="title has-text-centered has-text-white">Notes:</h1>
        <!-- Other content and loop to display articles -->
        <button class="button is-danger" onclick="openDeleteModal('{{ article.id }}')">Delete</button>
    </div>
</section>
{% endblock %}
